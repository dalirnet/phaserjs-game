"use strict";var s=function t(e,i,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,i,a)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(a):void 0},d=function(){function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}}();function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function o(n,s,r){function h(i,t){if(!s[i]){if(!n[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(d)return d(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=s[i]={exports:{}};n[i][0].call(a.exports,function(t){var e=n[i][1][t];return h(e||t)},a,a.exports,o,n,s,r)}return s[i].exports}for(var d="function"==typeof require&&require,t=0;t<r.length;t++)h(r[t]);return h}({1:[function(t,e,i){var a=function(){function e(t){f(this,e),this.scene=t,this.target={},this.animate={}}return d(e,[{key:"addAnimate",value:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],r=this;this.animate[a]={second:e,fps:i,allFrameCount:e<1e3?i:e/1e3*i,loop:o,delay:0<n?n+e:0,frame:t,config:s,timer:{},delayTimer:{},isRun:!1,lastFrame:1,runTime:0,firstValue:{}},r.animate[a].frame[0]=[],s.forEach(function(i,t){r.animate[a].firstValue[i[0]]={},i[1].forEach(function(t,e){"rotation"!==t&&(r.animate[a].firstValue[i[0]][t]=r.target[i[0]][t]),r.animate[a].frame[0].push([i[0],t,r.target[i[0]][t]])})})}},{key:"start",value:function(t){var e=this,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.animate[t].isRun||(this.animate[t].lastFrame=1,this.animate[t].runTime=0,this.animate[t].isRun=!0,i&&this.resetFrame(t),0<this.animate[t].delay?(this.loopFrame(t,!0),this.animate[t].delayTimet=this.scene.game.time.create(),this.animate[t].delayTimet.loop(this.animate[t].delay,function(){e.loopFrame(t,!0)},this),this.animate[t].delayTimet.start()):this.loopFrame(t))}},{key:"stop",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.animate[t].isRun&&(this.animate[t].isRun=!1,e&&this.resetFrame(t),0<this.animate[t].delay&&this.animate[t].delayTimet.stop(),this.animate[t].timer.stop())}},{key:"resetFrame",value:function(t){this.setFrame(t,0)}},{key:"loopFrame",value:function(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.animate[t].lastFrame=1,this.animate[t].timer=this.scene.game.time.create(),this.animate[t].timer.loop(this.animate[t].second/this.animate[t].fps,function(){e.setFrame(t,e.animate[t].lastFrame),e.animate[t].lastFrame<e.animate[t].allFrameCount?e.animate[t].lastFrame++:(e.animate[t].runTime++,e.animate[t].lastFrame=1,0<e.animate[t].loop&&e.animate[t].runTime>=e.animate[t].loop&&e.stop(t,!0),i&&(e.resetFrame(t),e.animate[t].timer.stop()))},this),this.animate[t].timer.start()}},{key:"setFrame",value:function(e,i){var a=this;this.animate[e].frame[i].forEach(function(t){"rotation"!==t[1]&&0<i?a.target[t[0]][t[1]]=a.animate[e].firstValue[t[0]][t[1]]+t[2]:a.target[t[0]][t[1]]=t[2]})}}]),e}();e.exports=a},{}],2:[function(t,e,i){var a=function(){function i(t,e){f(this,i),this.state=t,this.key=e,this.state.scene.game.isMobile||this.load(this.state.animate[this.key])}return d(i,[{key:"load",value:function(t){var e=this,i=this;this.frameTd=[],this.object=t,this.defualtFrame=this.object.frame,this.frame=this.object.second<1e3?this.object.fps:this.object.second/1e3*this.object.fps,this.addStyle(),this.editor=document.createElement("div"),this.editor.setAttribute("id","animationEditor"),document.getElementsByTagName("body")[0].appendChild(this.editor),this.start(),this.runBtn=document.createElement("button"),this.runBtn.setAttribute("id","runBtn"),this.runBtn.innerText="start",this.renderBtn=document.createElement("button"),this.renderBtn.setAttribute("id","renderBtn"),this.renderBtn.innerText="render",this.timeLineIsRun=!1,this.timer=0,this.setFrameIndex=1,this.runBtn.addEventListener("click",function(){e.timeLineIsRun?(clearInterval(e.timer),e.timeLineIsRun=!1,e.runBtn.innerText="start"):(e.timeLineIsRun=!0,e.runBtn.innerText="stop",e.timer=setInterval(function(){e.setFrameIndex>e.frame?(clearInterval(e.timer),e.timeLineIsRun=!1,e.runBtn.innerText="start",e.setFrameIndex=1):(i.setFrame(e.setFrameIndex),e.setFrameIndex++)},e.object.second/e.frame))}),this.renderBtn.addEventListener("click",function(){i.getRender()}),this.editor.appendChild(this.runBtn),this.editor.appendChild(this.renderBtn)}},{key:"start",value:function(){var i=this,d=this;this.table=document.createElement("table");for(var t=this.table.insertRow(),e=-1;e<=this.frame;e++){var a=t.insertCell(),o=document.createElement("span");-1===e?o.innerText="object":0===e?o.innerText="property":(o.innerText="F "+e,this.frameTd.push(a)),a.appendChild(o)}this.object.config.forEach(function(h,t){h[1].forEach(function(n,s){for(var r=d.table.insertRow(),t=function(t){var e=r.insertCell();if(-1===t){if(0===s){var i=document.createElement("span");i.innerText=h[0],e.appendChild(i)}}else if(0===t){var a=document.createElement("span");a.innerText=n,e.appendChild(a)}else{var o=document.createElement("input");o.setAttribute("id","frame_"+t+"__"+h[0]+"_"+n),o.type="number","rotation"===n?(o.step="0.01",o.value=Math.floor(100*d.state.target[h[0]][n])/100,d.defualtFrame.hasOwnProperty(t)&&d.defualtFrame.hasOwnProperty(t)&&d.defualtFrame[t].forEach(function(t,e){t[0]===h[0]&&t[1]===n&&(o.value=Math.floor(100*t[2])/100,o.setAttribute("class","change"))})):(o.step="1",o.value=Math.floor(d.state.target[h[0]][n]),d.defualtFrame.hasOwnProperty(t)&&d.defualtFrame.hasOwnProperty(t)&&d.defualtFrame[t].forEach(function(t,e){t[0]===h[0]&&t[1]===n&&(o.value=Math.floor(d.state.target[h[0]][n])+Math.floor(t[2]),o.setAttribute("class","change"))})),o.addEventListener("focus",function(){d.setFrame(t)}),o.addEventListener("change",function(){o.setAttribute("class","change"),d.state.target[h[0]][n]=o.value}),e.appendChild(o)}},e=-1;e<=i.frame;e++)t(e)}),d.table.insertRow().setAttribute("class","break")}),this.editor.appendChild(this.table)}},{key:"setFrame",value:function(a){var o=this;this.object.config.forEach(function(i,t){i[1].forEach(function(t,e){o.state.target[i[0]][t]=document.getElementById("frame_"+a+"__"+i[0]+"_"+t).value})}),this.activeFrame(a)}},{key:"activeFrame",value:function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.frameTd.forEach(function(t,e){i-1===e?t.setAttribute("class","active"):t.setAttribute("class","")})}},{key:"getRender",value:function(){for(var r=this,h={},t=1;t<=this.frame;t++)h[t]=[];var d=this.object.frame[0];this.object.config.forEach(function(s,t){s[1].forEach(function(i,t){for(var e=1;e<=r.frame;e++){var a=document.getElementById("frame_"+e+"__"+s[0]+"_"+i);if(a.hasAttribute("class")&&"change"===a.getAttribute("class")){var o=a.value;if("rotation"!==i){var n=0;d.forEach(function(t,e){s[0]===t[0]&&i===t[1]&&(n=t[2])}),o=a.value-n}h[e].push([s[0],i,o])}}})}),alert(h.toSource())}},{key:"addStyle",value:function(){this.style();var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(this.css)),t.appendChild(e)}},{key:"style",value:function(){this.css="\n        #animationEditor {\n            position: absolute;\n            width: 100%;\n            left: 0;\n            top: 0;\n            box-sizing: border-box;\n            overflow: auto;\n            font-family: tahoma;\n            font-size: 10px;\n            text-align: center;\n            background: rgba(255,255,255,0.7);\n            padding: 10px;\n        }\n        #runBtn {\n            position: absolute;\n            width: 100px;\n            bottom:0;\n            left: 50%;\n            margin-left: -105px;\n        }\n        #renderBtn {\n            position: absolute;\n            width: 100px;\n            bottom:0;\n            left: 50%;\n            margin-left: 5px;\n        }\n        input {\n            direction: ltr;\n            width: 70px;\n            border: none;\n            font-family: tahoma;\n            font-size: 10px;\n            text-align: center;\n            background: none;\n        }\n        table {\n            display: inline-block;\n        }\n        table tr:first-child {\n            background: #242424;\n            color: #fff;\n        }\n        td {\n            text-align: center;\n            vertical-align: middle;\n        }\n        td.active {\n            background: #a22222;\n        }\n        .break {\n            display: inline-block;\n        }\n        "}}]),i}();e.exports=a},{}],3:[function(a,t,e){var o=a("../../animation"),n=a("./object/idle"),s=a("./object/jump"),i=function(t){function i(t){f(this,i);var e=m(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return e.target=e.scene.game.player,e.idleCreate(),e.jumpCreate(),e}return r(i,o),d(i,[{key:"idleCreate",value:function(){this.addAnimate("idle",n,1e3,8,-1,600,[["headGroup",["rotation","y"]],["upperBodyGroup",["y"]],["leftHandGroup",["rotation"]],["rightHandGroup",["rotation"]],["leftFootGroup",["rotation"]],["rightFootGroup",["rotation"]],["leftFootBottom",["rotation"]],["rightFootBottom",["rotation"]]])}},{key:"jumpCreate",value:function(){this.addAnimate("jump",s,500,6,1,0,[["upperBodyGroup",["rotation","y"]],["lowerBodyGroup",["rotation","y"]],["headGroup",["rotation","y"]],["leftHandGroup",["rotation"]],["rightHandGroup",["rotation"]],["leftHandBottom",["rotation"]],["rightHandBottom",["rotation"]],["leftFootGroup",["rotation"]],["rightFootGroup",["rotation"]],["leftFootBottom",["rotation"]],["rightFootBottom",["rotation"]]])}},{key:"addAnimationEditor",value:function(t){var e=a("../../animationEditor");this.editor=new e(this,t)}}]),i}();t.exports=i},{"../../animation":1,"../../animationEditor":2,"./object/idle":4,"./object/jump":5}],4:[function(t,e,i){e.exports={1:[["headGroup","y",-1]],2:[["headGroup","rotation","0.01"],["headGroup","y",0],["upperBodyGroup","y",0],["leftHandGroup","rotation","0.01"],["rightHandGroup","rotation","-0.01"],["leftFootGroup","rotation","-0.02"],["rightFootGroup","rotation","-0.02"],["leftFootBottom","rotation","0.04"],["rightFootBottom","rotation","0.04"]],3:[["headGroup","rotation","0.02"],["headGroup","y",1],["upperBodyGroup","y",2],["leftHandGroup","rotation","0.02"],["rightHandGroup","rotation","-0.02"],["leftFootGroup","rotation","-0.03"],["rightFootGroup","rotation","-0.03"],["leftFootBottom","rotation","0.06"],["rightFootBottom","rotation","0.06"]],4:[["headGroup","rotation","0.03"],["headGroup","y",2],["upperBodyGroup","y",3],["leftHandGroup","rotation","0.03"],["rightHandGroup","rotation","-0.03"],["leftFootGroup","rotation","-0.04"],["rightFootGroup","rotation","-0.04"],["leftFootBottom","rotation","0.08"],["rightFootBottom","rotation","0.08"]],5:[["headGroup","rotation","0.02"],["headGroup","y",1],["upperBodyGroup","y",1],["leftHandGroup","rotation","0.02"],["rightHandGroup","rotation","-0.02"],["leftFootGroup","rotation","-0.04"],["rightFootGroup","rotation","-0.04"],["leftFootBottom","rotation","0.08"],["rightFootBottom","rotation","0.08"]],6:[["headGroup","rotation","0.01"],["headGroup","y",0],["leftHandGroup","rotation","0.01"],["rightHandGroup","rotation","-0.01"],["leftFootGroup","rotation","-0.03"],["rightFootGroup","rotation","-0.03"],["leftFootBottom","rotation","0.06"],["rightFootBottom","rotation","0.06"]],7:[["headGroup","y",0],["upperBodyGroup","y",0],["leftFootGroup","rotation","-0.02"],["rightFootGroup","rotation","-0.02"],["leftFootBottom","rotation","0.04"],["rightFootBottom","rotation","0.04"]],8:[["headGroup","y",-1],["leftFootGroup","rotation","-0.01"],["rightFootGroup","rotation","-0.01"],["leftFootBottom","rotation","0.02"],["rightFootBottom","rotation","0.02"]]}},{}],5:[function(t,e,i){e.exports={1:[["upperBodyGroup","rotation","0.08"],["lowerBodyGroup","rotation","-0.19"],["headGroup","rotation","-0.09"],["leftHandGroup","rotation","-0.19"],["rightHandGroup","rotation","0.05"],["leftHandBottom","rotation","-0.08"],["rightHandBottom","rotation","-0.08"],["rightFootGroup","rotation","-0.02"],["leftFootBottom","rotation","0.31"],["rightFootBottom","rotation","0.12"]],2:[["upperBodyGroup","rotation","0.01"],["lowerBodyGroup","rotation","-0.18"],["headGroup","rotation","-0.09"],["leftHandGroup","rotation","-0.37"],["rightHandGroup","rotation","0.16"],["leftHandBottom","rotation","-0.47"],["rightHandBottom","rotation","-0.27"],["leftFootGroup","rotation","0.01"],["rightFootGroup","rotation","-0.19"],["leftFootBottom","rotation","0.34"],["rightFootBottom","rotation","0.29"]],3:[["upperBodyGroup","rotation","-0.03"],["lowerBodyGroup","rotation","-0.05"],["headGroup","rotation","-0.09"],["leftHandGroup","rotation","-0.52"],["rightHandGroup","rotation","0.53"],["leftHandBottom","rotation","-0.67"],["rightHandBottom","rotation","-0.47"],["leftFootGroup","rotation","-0.1"],["rightFootGroup","rotation","-0.44"],["leftFootBottom","rotation","0.82"],["rightFootBottom","rotation","0.08"]],4:[["upperBodyGroup","rotation","-0.03"],["lowerBodyGroup","rotation","0.09"],["headGroup","rotation","-0.09"],["leftHandGroup","rotation","-0.39"],["rightHandGroup","rotation","0.3"],["leftHandBottom","rotation","-0.56"],["rightHandBottom","rotation","-0.47"],["leftFootGroup","rotation","-0.1"],["rightFootGroup","rotation","-0.44"],["leftFootBottom","rotation","0.82"],["rightFootBottom","rotation","0.08"]],5:[["upperBodyGroup","rotation","0.01"],["lowerBodyGroup","rotation","-0.18"],["headGroup","rotation","-0.09"],["leftHandGroup","rotation","-0.37"],["rightHandGroup","rotation","0.16"],["leftHandBottom","rotation","-0.47"],["rightHandBottom","rotation","-0.27"],["leftFootGroup","rotation","0.01"],["rightFootGroup","rotation","-0.19"],["leftFootBottom","rotation","0.34"],["rightFootBottom","rotation","0.29"]],6:[["upperBodyGroup","rotation","0.08"],["lowerBodyGroup","rotation","-0.19"],["headGroup","rotation","-0.09"],["leftHandGroup","rotation","-0.19"],["rightHandGroup","rotation","0.05"],["leftHandBottom","rotation","-0.08"],["rightHandBottom","rotation","-0.08"],["rightFootGroup","rotation","-0.02"],["leftFootBottom","rotation","0.31"],["rightFootBottom","rotation","0.12"]]}},{}],6:[function(t,e,i){var a=t("../helper"),o=function(){function e(t){f(this,e),this.scene=t,this.color=a.intColor("#020723")}return d(e,[{key:"loadSpace",value:function(){this.dragXStart=this.scene.game.add.graphics(0,0),this.dragXEnd=this.scene.game.add.graphics(this.scene.game.width,0)}},{key:"onDragStart",value:function(t,e){this.dragXStart.clear(),this.dragXStart.beginFill(this.color,.7),this.dragXStart.moveTo(0,0),this.dragXStart.quadraticCurveTo(t+10,e,0,this.scene.game.height),this.dragXStart.endFill(),this.dragXStart.width=0,this.dragXStart.alpha=0,this.dragXEnd.clear(),this.dragXEnd.beginFill(this.color,.7),this.dragXEnd.moveTo(0,0),this.dragXEnd.quadraticCurveTo(-1*(this.scene.game.width-t+10),e,0,this.scene.game.height),this.dragXEnd.endFill(),this.dragXEnd.width=0,this.dragXEnd.alpha=0}},{key:"curveUpdateStart",value:function(t){this.dragXStart.width=Math.abs(t)*(.05*this.scene.game.width)/this.scene.game.width*(this.scene.game.screenScale/2),this.dragXStart.alpha=Math.abs(t)/this.scene.game.width}},{key:"curveUpdateEnd",value:function(t){this.dragXEnd.width=Math.abs(t)*(.05*this.scene.game.width)/this.scene.game.width*(this.scene.game.screenScale/2),this.dragXEnd.alpha=Math.abs(t)/this.scene.game.width}},{key:"resetCurve",value:function(){this.scene.game.add.tween(this.dragXStart).to({width:0,alpha:0},100,"Linear",!0),this.scene.game.add.tween(this.dragXEnd).to({width:0,alpha:0},100,"Linear",!0)}}]),e}();e.exports=o},{"../helper":12}],7:[function(t,e,i){var a=t("./scene"),o=t("../helper"),n=function(t){function e(){return f(this,e),m(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,a),d(e,[{key:"preload",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"preload",this).call(this),this.game.load.atlasJSONHash("tile","dist/image/tile.png","dist/json/tile.json"),this.game.load.atlasJSONHash("tileBase","dist/image/tileBase.png","dist/json/tileBase.json"),this.gameTile={},this.tileBaseIndex=0,this.tileLeftMargin=10*this.game.screenScale,this.leftSpace=4*this.tileLeftMargin,this.enterTile=-1}},{key:"create",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this),this.game.player.create(this)}},{key:"initGameSpace",value:function(){this.currentScale={main:.3*this.game.screenScale,base:.45*this.game.screenScale},this.game.isMobile&&(this.currentScale.main=.25*this.game.screenScale,this.game.scale.isGameLandscape),this.gameSpace=this.game.add.graphics(0,0),this.gamePlayeSpace=this.game.add.group(),this.gamePlayeSpace.y=this.game.groundPosition,this.gameSpace.addChild(this.gamePlayeSpace)}},{key:"gameSpaceDraggable",value:function(){var i=this;this.gameSpace.beginFill(o.intColor("#000"),0),this.gameSpace.drawRect(0,0,o.limitValue(this.gamePlayeSpace.width+8*this.tileLeftMargin,this.game.width),this.game.height,50),this.gameSpace.endFill(),this.gameSpace.inputEnabled=!0,this.gameSpace.input.allowVerticalDrag=!1,this.gameSpace.input.priorityID=1,this.gameSpace.input.enableDrag(),this.gameSpace.events.onDragStart.add(function(t,e){i.dragEffect.onDragStart(e.x,e.y)}),this.gameSpace.events.onDragUpdate.add(function(){0<=i.gameSpace.x?i.dragEffect.curveUpdateStart(i.gameSpace.x):Math.abs(i.gameSpace.x)>i.gameSpace.width-i.game.width&&i.dragEffect.curveUpdateEnd(i.gameSpace.width-i.game.width-Math.abs(i.gameSpace.x))}),this.gameSpace.events.onDragStop.add(function(){i.dragEffect.resetCurve(),0<=i.gameSpace.x?i.game.add.tween(i.gameSpace).to({x:0},200,"Linear",!0):Math.abs(i.gameSpace.x)>i.gameSpace.width-i.game.width&&i.game.add.tween(i.gameSpace).to({x:-1*(i.gameSpace.width-i.game.width)},200,"Linear",!0)})}},{key:"addMainTile",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this.game.add.sprite(this.leftSpace,0,"tile",t);i.anchor.setTo(0,1),i.scale.setTo(this.currentScale.main,this.currentScale.main),i.inputEnabled=!0,i.input.pixelPerfectClick=!0,i.input.pixelPerfectOver=!0,i.input.useHandCursor=!0,i.input.priorityID=10,i.events.onInputDown.add(function(){"function"==typeof e&&e()}),this.gamePlayeSpace.add(i),this.gameTile[t]=i,this.leftSpace+=i.width+this.tileLeftMargin}},{key:"addBaseTile",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this,a=this.tileBaseIndex;!0===t&&(t="_0_12");var o=this.game.add.sprite(this.leftSpace,this.game.rnd.integerInRange(1,25)*this.game.screenScale*-1,"tileBase",t);o.anchor.setTo(0,1),o.scale.setTo(this.currentScale.base,this.currentScale.base),o.inputEnabled=!0,o.input.pixelPerfectClick=!0,o.input.pixelPerfectOver=!0,o.input.useHandCursor=!0,o.input.priorityID=10,o.events.onInputDown.add(function(){"function"==typeof e&&e(),i.movePlayer(a,!0)}),this.gamePlayeSpace.add(o),this.gameTile["tileBase"+this.tileBaseIndex]=o,this.tileBaseIndex++,this.leftSpace+=o.width+this.tileLeftMargin}},{key:"addPlayer",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.gamePlayeSpace.add(this.game.player.bodyGroup),this.movePlayer(t,!1),this.game.player.initAnimation(),this.game.player.idle()}},{key:"jumpPlayer",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.gameTile["tileBase"+t];this.game.add.tween(this.game.player.headGroup).to({rotation:.1},200,"Linear",!0),this.game.add.tween(this.game.player.leftFootGroup).to({rotation:-.2},200,"Linear",!0),this.game.add.tween(this.game.player.rightFootGroup).to({rotation:-.2},200,"Linear",!0),this.game.add.tween(this.game.player.leftFootBottom).to({rotation:.4},200,"Linear",!0),this.game.add.tween(this.game.player.rightFootBottom).to({rotation:.4},200,"Linear",!0),this.game.add.tween(this.game.player.upperBodyGroup).to({rotation:.03,y:this.game.player.upperBodyGroup.y+20},200,"Linear",!0),this.game.add.tween(this.game.player.leftHandGroup).to({rotation:.3},200,"Linear",!0),this.game.add.tween(this.game.player.rightHandGroup).to({rotation:.3},200,"Linear",!0),this.game.add.tween(this.game.player.leftHandBottom).to({rotation:-.4},200,"Linear",!0),this.game.add.tween(this.game.player.rightHandBottom).to({rotation:-.4},200,"Linear",!0);var e={x:this.game.player.bodyGroup.x+150,y:this.game.player.bodyGroup.y-80};this.game.add.tween(this.game.player.bodyGroup).to({rotation:0,x:e.x,y:e.y},300,"Linear",!0,300)}},{key:"movePlayer",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.enterTile<e&&1===Math.abs(e-this.enterTile)){var a=this.gameTile["tileBase"+e];if(i){this.game.player.idle(!1,!0),this.game.player.jump();var o=this.gameTile["tileBase"+this.enterTile];this.game.add.tween(this.game.player.bodyGroup).to({x:o.x+.8*(a.x+.4*a.width-o.x+.4*o.width),y:a.y-.8*a.height},300,Phaser.Easing.Linear.None,!0).onComplete.add(function(){t.game.add.tween(t.game.player.bodyGroup).to({x:a.x+.4*a.width,y:a.y-.5*a.height},200,Phaser.Easing.Linear.None,!0).onComplete.add(function(){t.game.player.idle()},t)},this)}else this.game.player.bodyGroup.x=a.x+.4*a.width,this.game.player.bodyGroup.y=a.y-.5*a.height;this.enterTile=e}else this.movePlayerWarning()}},{key:"movePlayerWarning",value:function(){}},{key:"update",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}}]),e}();e.exports=n},{"../helper":12,"./scene":10}],8:[function(t,e,i){var h=t("../helper"),a=function(){function e(t){f(this,e),this.scene=t,this.index=0,this.notifications=[],this.toTopTween=null}return d(e,[{key:"load",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,a=this;if(!(3<this.notifications.length)){e=e?"#072104":"#210804",this.index+=1;var o={id:h.randId(),index:this.index},n=150*this.scene.game.screenScale,s=25*this.scene.game.screenScale,r=this.scene.padding*this.scene.game.screenScale;o.background=this.scene.game.add.graphics(0,0),o.background.alpha=0,o.margin=r,o.text=this.scene.game.make.text(0,0,t,this.scene.textStyle(10)),o.text.width>n&&(n=1.2*o.text.width),o.text.height>s&&(s=1.1*o.text.height),o.background.beginFill(h.intColor(e),1),o.background.drawRoundedRect(0,0,n,s,10),o.background.endFill(),o.background.addChild(o.text),o.text.setTextBounds(0,2*this.scene.game.screenScale,n,s),o.background.x=this.scene.game.width-n-r,o.background.y=r+(s+r)*this.notifications.length,this.notifications.push(o),this.notificationTween=this.scene.game.add.tween(o.background).to({alpha:1},400,"Linear",!0),this.notificationTween.onComplete.add(function(){setTimeout(function(){a.clear(o.id)},i)},this)}}},{key:"clear",value:function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this.toTopTween);var o=this,n=[];this.notifications.forEach(function(t,e){0==i?t.background.destroy():t.id==i&&(n.push([t.index,t.background.height+t.margin]),t.background.destroy(),o.notifications.splice(e,1))}),0==i?this.notifications=[]:0<o.notifications.length&&this.notifications.forEach(function(i,t){var a=0;n.forEach(function(t,e){i.index>t[0]&&(a+=t[1])}),o.toTopTween=setTimeout(function(){o.scene.game.add.tween(i.background).to({y:i.background.y-a},200,"Linear",!0)},500)})}}]),e}();e.exports=a},{"../helper":12}],9:[function(t,e,i){var a=t("./animation/player/PlayerAnimationClass"),o=(t("../helper"),function(){function e(t){f(this,e),this.game=t,this.name="",this.saveCoins=0,this.activeLevel=1,this.bodyType=1,this.faceType=1,this.beardType=4,this.eyesType=1,this.optic=0,this.idleAnimate=[],this.animationHandel=!1}return d(e,[{key:"preload",value:function(){this.game.load.atlasJSONHash("player","dist/image/player.png","dist/json/player.json")}},{key:"create",value:function(t){this.state=t,this.bodyGroup=this.game.add.sprite(0,0,"player","group_body"),this.bodyGroup.anchor.setTo(.5,1),this.lowerBodyGroup=this.game.make.sprite(28,375,"player","group_lowerBody"),this.rightFootGroup=this.game.make.sprite(60,5,"player","group_rightFoot"),this.rightFootBottom=this.game.make.sprite(0,132,"player","body_"+this.bodyType+"_foot_right_bottom"),this.rightFootTop=this.game.make.sprite(0,0,"player","body_"+this.bodyType+"_foot_right_top"),this.leftFootGroup=this.game.make.sprite(0,0,"player","group_leftFoot"),this.leftFootBottom=this.game.make.sprite(3,142,"player","body_"+this.bodyType+"_foot_left_bottom"),this.leftFootTop=this.game.make.sprite(0,0,"player","body_"+this.bodyType+"_foot_left_top"),this.upperBodyGroup=this.game.make.sprite(0,0,"player","group_upperBody"),this.rightHandGroup=this.game.make.sprite(137,205,"player","group_rightHand"),this.rightHandBottom=this.game.make.sprite(9,104,"player","body_"+this.bodyType+"_hand_right_bottom"),this.rightHandTop=this.game.make.sprite(0,0,"player","body_"+this.bodyType+"_hand_right_top"),this.body=this.game.make.sprite(0,144,"player","body_"+this.bodyType+"_body"),this.headGroup=this.game.make.sprite(27,0,"player","group_head"),this.face=this.game.make.sprite(24,29,"player","face_"+this.faceType+"_"+this.beardType+"_"+this.eyesType),this.opticOver=this.game.make.sprite(24,29,"player","face_optic"),1!==this.optic&&(this.opticOver.alpha=0),this.headOver=this.game.make.sprite(0,0,"player","body_"+this.bodyType+"_head_over"),this.leftHandGroup=this.game.make.sprite(0,193,"player","group_leftHand"),this.leftHandBottom=this.game.make.sprite(2,107,"player","body_"+this.bodyType+"_hand_left_bottom"),this.leftHandTop=this.game.make.sprite(0,0,"player","body_"+this.bodyType+"_hand_left_top"),this.addToParent(this.lowerBodyGroup,this.bodyGroup,72,28),this.addToParent(this.rightFootGroup,this.lowerBodyGroup,32,31),this.addToParent(this.rightFootBottom,this.rightFootGroup,30,23),this.addToParent(this.rightFootTop,this.rightFootGroup,0,0),this.addToParent(this.leftFootGroup,this.lowerBodyGroup,40,30),this.addToParent(this.leftFootBottom,this.leftFootGroup,38,23),this.addToParent(this.leftFootTop,this.leftFootGroup,0,0),this.addToParent(this.upperBodyGroup,this.bodyGroup,100,400),this.addToParent(this.rightHandGroup,this.upperBodyGroup,23,30),this.addToParent(this.rightHandBottom,this.rightHandGroup,13,18),this.addToParent(this.rightHandTop,this.rightHandGroup,0,0),this.addToParent(this.body,this.upperBodyGroup,100,261),this.addToParent(this.leftHandGroup,this.upperBodyGroup,40,27),this.addToParent(this.headGroup,this.upperBodyGroup,83,170),this.addToParent(this.face,this.headGroup,0,0),this.addToParent(this.opticOver,this.headGroup,0,0),this.addToParent(this.headOver,this.headGroup,0,0),this.addToParent(this.leftHandBottom,this.leftHandGroup,28,15),this.addToParent(this.leftHandTop,this.leftHandGroup,0,0),this.bodyGroup.scale.setTo(.16*this.game.screenScale,.16*this.game.screenScale)}},{key:"initAnimation",value:function(){this.animation=new a(this.state),this.animationHandel=!0}},{key:"checkForAnimationHandel",value:function(){this.animationHandel||this.initAnimation()}},{key:"idle",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.checkForAnimationHandel(),t?this.animation.start("idle"):this.animation.stop("idle",e)}},{key:"jump",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.checkForAnimationHandel(),t?this.animation.start("jump"):this.animation.stop("jump",e)}},{key:"addToParent",value:function(t,e,i,a){e.addChild(t),t.anchor.setTo(i/t.width,a/t.height),t.x=e.width*e.anchor.x*-1+(t.x+t.width*t.anchor.x),t.y=e.height*e.anchor.y*-1+(t.y+t.height*t.anchor.y)}},{key:"setName",value:function(t){this.name=t}},{key:"setSaveCoins",value:function(t){this.saveCoins=t}},{key:"setActiveLevel",value:function(t){this.activeLevel=t}}]),e}());e.exports=o},{"../helper":12,"./animation/player/PlayerAnimationClass":3}],10:[function(t,e,i){var a=t("./notify"),o=t("./dragEffect"),n=t("./animation"),s=t("../helper"),r=function(){function e(t){f(this,e),this.game=t,this.coverCoinsUpAnimation=20,this.padding=7,this.notify=new a(this),this.dragEffect=new o(this),this.animation=new n(this)}return d(e,[{key:"preload",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=this;this.imgObj={},this.isPopupOpen=!1,this.saveCoins=0,this.coinAmountUpdateNeed=!1,this.game.player.saveCoins>this.coverCoinsUpAnimation&&(this.saveCoins=this.game.player.saveCoins-this.coverCoinsUpAnimation),this.stateBounds={radius:30,width:{size:this.game.world.width,one:0,two:this.game.world.width},height:{size:this.game.world.height,one:0,two:this.game.world.height}},this.notify.clear(),this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.stage.backgroundColor="#000623",this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVeritcally=!0,t&&(this.game.load.image("backgroundStar","dist/image/star.png"),this.game.load.image("background","dist/image/background.png"),this.game.load.image("popupFrame","dist/image/popupFrame.png"),this.game.load.image("coinBox_1","dist/image/coinBox_1.png"),this.game.load.image("coinBox_2","dist/image/coinBox_2.png"),this.game.load.image("coinWithStroke","dist/image/coinWithStroke.png"),this.game.load.atlasJSONHash("btn","dist/image/btn.png","dist/json/btn.json")),e&&this.game.player.preload(),this.game.load.onFileComplete.add(function(t,e){s.loadingProcess(t);var i=a.game.cache.getItem(e,Phaser.Cache.IMAGE);a.imgObj[e]={s:Math.round(Math.round(1/(i.base.width/i.base.height/a.game.screenScale)*100)/100/i.frameData._frames.length*100)/100,w:i.base.width,h:i.base.height},i.scale=a.imgObj[e].s})}},{key:"create",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.backGroundGradientCreator(),this.backgroundStar={},this.backgroundStar=this.game.add.tileSprite(this.game.world.centerX,0,this.game.width/(.2*this.game.screenScale),.8*this.game.height/(.2*this.game.screenScale),"backgroundStar"),this.backgroundStar.anchor.set(.5,0),this.backgroundStar.scale.setTo(.2*this.game.screenScale,.2*this.game.screenScale),this.background=this.game.add.tileSprite(this.game.world.centerX,0,this.game.width/(.2*this.game.screenScale),this.imgObj.background.h,"background"),this.background.anchor.set(.5,1),this.background.y=.88*this.game.height,this.game.groundPosition=this.background.y-15*this.game.screenScale,this.background.scale.setTo(.2*this.game.screenScale,.2*this.game.screenScale),this.dragEffect.loadSpace(),t?(this.addPopUpStage(),this.addPlayerSaveCoinsBox(this.game.world.centerX,this.stateBounds.height.two)):(this.addPlayerNameBox(),this.addPlayerSaveCoinsBox(this.padding*this.game.screenScale,this.playerNameBox.height+this.playerNameBox.y+this.padding*this.game.screenScale,{x:0,y:0})),this.updatePlayerSaveCoins(this.game.player.saveCoins)}},{key:"addMainBtn",value:function(){var t=this;this.shopSceneBtn=this.game.add.button(this.game.width-7*this.game.screenScale,this.game.height-7*this.game.screenScale,"btn",function(){t.startState("Shop")},null,"_01_0","_01_1","_01_0","_01_1"),this.shopSceneBtn.anchor.set(1,1),this.shopSceneBtn.input.pixelPerfectClick=!0,this.shopSceneBtn.input.pixelPerfectOver=!0,this.shopSceneBtn.input.priorityID=200,this.shopSceneBtn.scale.setTo(.4*this.game.screenScale,.4*this.game.screenScale),this.levelSceneBtn=this.game.add.button(8*this.game.screenScale,this.game.height-7*this.game.screenScale,"btn",function(){t.startState("Level")},null,"_03_0","_03_1","_03_0","_03_1"),this.levelSceneBtn.anchor.set(0,1),this.levelSceneBtn.input.pixelPerfectClick=!0,this.levelSceneBtn.input.pixelPerfectOver=!0,this.levelSceneBtn.input.priorityID=200,this.levelSceneBtn.scale.setTo(.4*this.game.screenScale,.4*this.game.screenScale)}},{key:"addPopUpStage",value:function(){this.isPopupOpen=!0,this.stateBounds.height.size=.8*this.game.world.height,this.stateBounds.height.one=.1*this.game.world.height,this.stateBounds.height.two=.9*this.game.world.height,this.stateBounds.width.size=this.stateBounds.height.size,this.stateBounds.width.one=(this.game.world.width-this.stateBounds.height.size)/2,this.stateBounds.width.two=this.stateBounds.width.one+this.stateBounds.width.size,this.game.scale.isGameLandscape?this.game.device.desktop||(this.stateBounds.width.size=.6*this.game.world.width,this.stateBounds.width.one=.2*this.game.world.width,this.stateBounds.width.two=.8*this.game.world.width):(this.stateBounds.width.size=.8*this.game.world.width,this.stateBounds.width.one=.1*this.game.world.width,this.stateBounds.width.two=.9*this.game.world.width),this.popupBackground=this.game.add.graphics(0,0),this.popupBackground.hitArea=0,this.popupBackground.beginFill(s.intColor("#010a26"),.8),this.popupBackground.moveTo(0,0),this.popupBackground.lineTo(this.game.world.width,0),this.popupBackground.lineTo(this.game.world.width,this.game.world.height),this.popupBackground.lineTo(0,this.game.world.height),this.popupBackground.lineTo(0,this.stateBounds.height.size/2),this.popupBackground.lineTo(this.stateBounds.width.one,this.stateBounds.height.size/2),this.popupBackground.lineTo(this.stateBounds.width.one,this.stateBounds.height.two-this.stateBounds.radius),this.popupBackground.quadraticCurveTo(this.stateBounds.width.one,this.stateBounds.height.two,this.stateBounds.width.one+this.stateBounds.radius,this.stateBounds.height.two),this.popupBackground.lineTo(this.stateBounds.width.two-this.stateBounds.radius,this.stateBounds.height.two),this.popupBackground.quadraticCurveTo(this.stateBounds.width.two,this.stateBounds.height.two,this.stateBounds.width.two,this.stateBounds.height.two-this.stateBounds.radius),this.popupBackground.lineTo(this.stateBounds.width.two,this.stateBounds.height.one+this.stateBounds.radius),this.popupBackground.quadraticCurveTo(this.stateBounds.width.two,this.stateBounds.height.one,this.stateBounds.width.two-this.stateBounds.radius,this.stateBounds.height.one),this.popupBackground.lineTo(this.stateBounds.width.one+this.stateBounds.radius,this.stateBounds.height.one),this.popupBackground.quadraticCurveTo(this.stateBounds.width.one,this.stateBounds.height.one,this.stateBounds.width.one,this.stateBounds.height.one+this.stateBounds.radius),this.popupBackground.lineTo(this.stateBounds.width.one,this.stateBounds.height.size/2),this.popupBackground.lineTo(0,this.stateBounds.height.size/2),this.popupBackground.endFill(),this.popupFrameTop=this.game.add.image(this.game.world.centerX,this.stateBounds.height.one-this.game.screenScale,"popupFrame"),this.popupFrameTop.anchor.set(.5,1),this.popupFrameTop.scale.setTo(.2*this.game.screenScale,.2*this.game.screenScale),this.popupFrameBottom=this.game.add.image(this.game.world.centerX,this.stateBounds.height.two+this.game.screenScale,"popupFrame"),this.popupFrameBottom.anchor.set(.5,1),this.popupFrameBottom.angle=180,this.popupFrameBottom.scale.setTo(.2*this.game.screenScale,.2*this.game.screenScale),this.popupFrameLeft=this.game.add.image(this.stateBounds.width.one-this.game.screenScale,this.game.world.centerY,"popupFrame"),this.popupFrameLeft.anchor.set(.5,1),this.popupFrameLeft.angle=-90,this.popupFrameLeft.scale.setTo(.2*this.game.screenScale,.2*this.game.screenScale),this.popupFrameRight=this.game.add.image(this.stateBounds.width.two+this.game.screenScale,this.game.world.centerY,"popupFrame"),this.popupFrameRight.anchor.set(.5,1),this.popupFrameRight.angle=90,this.popupFrameRight.scale.setTo(.2*this.game.screenScale,.2*this.game.screenScale),this.popupCoinBox=this.game.add.image(this.stateBounds.width.one,this.stateBounds.height.two,"coinBox_1"),this.popupCoinBox.anchor.set(.3,.8),this.popupCoinBox.scale.setTo(.2*this.game.screenScale,.2*this.game.screenScale),this.stateBounds.width._size=this.stateBounds.width.size,this.stateBounds.width._one=this.stateBounds.width.one,this.stateBounds.width._two=this.stateBounds.width.two,this.stateBounds.height._size=this.stateBounds.height.size,this.stateBounds.height._one=this.stateBounds.height.one,this.stateBounds.height._two=this.stateBounds.height.two,this.game.device.desktop||(this.game.scale.isGameLandscape?(this.stateBounds.width._size=this.stateBounds.height.size,this.stateBounds.width._one=(this.game.world.width-this.stateBounds.height.size)/2,this.stateBounds.width._two=this.stateBounds.width._one+this.stateBounds.width._size):(this.stateBounds.height._size=this.stateBounds.width.size,this.stateBounds.height._one=(this.game.world.height-this.stateBounds.width.size)/2,this.stateBounds.height._two=this.stateBounds.height._one+this.stateBounds.height._size))}},{key:"addPlayerNameBox",value:function(){var t=60*this.game.screenScale,e=25*this.game.screenScale,i=this.padding*this.game.screenScale;this.playerNameBox=this.game.add.graphics(0,0),this.playerNameText=this.game.make.text(0,0,this.game.player.name,this.textStyle(12)),this.playerNameText.width>t&&(t=1.2*this.playerNameText.width),this.playerNameText.height>e&&(e=1.1*this.playerNameText.height),this.playerNameBox.beginFill(s.intColor("#040a21"),1),this.playerNameBox.drawRoundedRect(0,0,t,e,10),this.playerNameBox.endFill(),this.playerNameBox.addChild(this.playerNameText),this.playerNameBox.x=i,this.playerNameBox.y=i,this.playerNameText.setTextBounds(0,2*this.game.screenScale,t,e)}},{key:"updatePlayerSaveCoins",value:function(t){!(1<arguments.length&&void 0!==arguments[1])||arguments[1]?this.saveCoins+=t:this.saveCoins-=t,this.saveCoinsText&&(this.coinAmountUpdateNeed=!0)}},{key:"addPlayerSaveCoinsBox",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:.5,y:.5},a=this.padding*this.game.screenScale;this.saveCoinsBox=this.game.add.graphics(0,0),this.saveCoinsBox.anchor.set(i.x,i.y),this.coinAmountImage=this.game.make.image(0,0,"coinWithStroke"),this.coinAmountImage.anchor.set(.5,.5),this.saveCoinsBox.addChild(this.coinAmountImage),this.saveCoinsText=this.game.make.text(0,0,this.saveCoins,this.textStyle(10)),this.saveCoinsBox.beginFill(s.intColor("#040a21"),1),this.saveCoinsBox.drawRoundedRect(0,0,this.saveCoinsText.width+4*a,this.saveCoinsText.height+1.7*a,10),this.saveCoinsBox.endFill(),this.saveCoinsText.setTextBounds(0,2*this.game.screenScale,this.saveCoinsBox.width,.95*this.saveCoinsBox.height),this.saveCoinsBox.addChild(this.saveCoinsText),this.saveCoinsBox.x=t-this.saveCoinsBox.width*i.x,this.saveCoinsBox.y=e-this.saveCoinsBox.height*i.y,this.coinAmountImage.x=.5*this.saveCoinsBox.width,this.coinAmountImage.y=this.saveCoinsBox.height,this.coinAmountImage.scale.setTo(.3*this.game.screenScale,.3*this.game.screenScale)}},{key:"backGroundGradientCreator",value:function(){var t=this.game.add.bitmapData(this.game.width,this.game.height),e=t.context.createLinearGradient(0,0,0,this.game.height);e.addColorStop(0,"#020723"),e.addColorStop(.48,"#1d58aa"),e.addColorStop(.56,"#1d58aa"),e.addColorStop(.8,"#0d337b"),e.addColorStop(1,"#000623"),t.context.fillStyle=e,t.context.fillRect(0,0,this.game.width,this.game.height),this.backgroundGradient=this.game.add.sprite(0,0,t),this.backgroundGradient.fixedToCamera=!0}},{key:"startFullScreen",value:function(){this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,!this.game.scale.isFullScreen&&this.game.scale.isGameLandscape&&this.game.scale.startFullScreen(!1)}},{key:"startState",value:function(t){if(this.game.state.current!==t){s.domObject("loading",!0,"display",!1);var e=this;setTimeout(function(){e.game.state.start(t)},500)}}},{key:"showState",value:function(){(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&this.addMainBtn(),s.domObject("loading",!1,"display",!1),s.domObject("game",!0)}},{key:"textStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20;return{fill:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"#fff",font:t*this.game.screenScale+"px gameWebFont",boundsAlignH:"center",boundsAlignV:"middle"}}},{key:"coinsValueUpdate",value:function(){if(this.coinAmountUpdateNeed){var t=Number(this.saveCoinsText.text);t<this.game.player.saveCoins?this.saveCoinsText.setText(t+1):t>this.game.player.saveCoins?this.saveCoinsText.setText(t-1):this.coinAmountUpdateNeed=!1}}},{key:"update",value:function(){this.backgroundStar.tilePosition.y-=1,this.backgroundStar.tilePosition.x+=1,this.background.tilePosition.x-=.8,this.coinsValueUpdate()}}]),e}();e.exports=r},{"../helper":12,"./animation":1,"./dragEffect":6,"./notify":8}],11:[function(t,e,i){var d=t("./class/player"),l=t("./scene/boot"),c=t("./scene/shop"),p=t("./scene/level"),u=t("./scene/level/level_1"),g=t("./helper"),o=(window.devicePixelRatio,new NoSleep),n=void 0,s=function(t){function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.innerWidth,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.innerHeight;f(this,h);var i=g.screenObject(t,e),a=m(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,{width:i.width,height:i.height,renderer:Phaser.AUTO,parent:"game",transparent:!0,antialias:!0}));a.isMobile=g.isMobile(),a.screenScale=i.scale,a.pixelRatio=1+(window.devicePixelRatio-1)/2,a.groundPosition=0,a.player=new d(a),a.player.setName("امیر رضا"),a.player.setSaveCoins(50),a.player.setActiveLevel(1);var o=new l(a),n=new c(a),s=new p(a),r=new u(a);return a.state.add("Boot",o,!1),a.state.add("Shop",n,!1),a.state.add("Level",s,!1),a.state.add("Level_1",r,!1),a}return r(h,Phaser.Game),h}();window.addEventListener("load",function(){var t=window.innerWidth,e=window.innerHeight,i=new s(t,e);WebFont.load({active:function(){i.state.start("Level_1")},custom:{families:["gameWebFont"],urls:["/dist/css/font.css"]}});var a=function(){g.domObject("loading",!0,"display",!1),g.domObject("game",!1,"visibility",!1),clearTimeout(n),n=setTimeout(function(){var t=g.screenObject();i.screenScale=t.scale,i.scale.setGameSize(t.width,t.height),i.scale.refresh(),i.state.restart(!0,!1),g.domObject("game",!0),g.domObject("loading",!1,"display",!1)},500)};window.addEventListener("orientationchange",a),window.addEventListener("resize",a),window.addEventListener("contextmenu",function(t){t.preventDefault()}),window.addEventListener("click",function t(){o.enable(),window.removeEventListener("click",t,!1)},!1)})},{"./class/player":9,"./helper":12,"./scene/boot":13,"./scene/level":14,"./scene/level/level_1":15,"./scene/shop":16}],12:[function(t,e,i){var s={getWithId:function(t){return document.getElementById(t)},domObject:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"visibility",a=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];"loading"==t&&(s.getWithId("load").innerText="");var o=s.getWithId(t),n={display:"none",visibility:"hidden"};e&&(n={display:"block",visibility:"visible"}),a?(e?(o.style.opacity=0,o.style[i]=n[i],this.addClass(o,"fadeIn")):this.addClass(o,"fadeOut"),o.addEventListener("webkitAnimationEnd",function(){s.endOfFadeAnimation(o,e,i)}),o.addEventListener("animationend",function(){s.endOfFadeAnimation(o,e,i)})):o.style[i]=n[i]},endOfFadeAnimation:function(t,e,i){e?(t.style.opacity=1,this.removeClass(t,"fadeIn")):(t.style.opacity=0,"visibility"==i?t.style.visibility="hidden":t.style.display="none",this.removeClass(t,"fadeOut"))},removeClass:function(t,e){return t.classList.remove(e),t},addClass:function(t,e){return t.classList.add(e),t},intColor:function(t){return Phaser.Color.hexToColor(t).color},randId:function(){return(new Date).getTime().toString(36).substr(-3)+Math.random().toString(36).substr(-3)},isMobile:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))},screenObject:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.innerWidth,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.innerHeight,i=window.devicePixelRatio,a=t*i,o=e*i,n=1280;return s.isMobile()&&(n*=.6),{width:a,height:o,scale:Math.floor(Math.sqrt(Math.pow(a,2)+Math.pow(o,2)))/n}},loadingProcess:function(t){s.getWithId("load").innerText=Math.floor(t-100*Math.random()/10)},limitValue:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return null!=e&&t<e?e:null!=i&&i<t?i:t}};e.exports=s},{}],13:[function(t,e,i){var a=t("../class/scene"),o=(t("../helper"),function(t){function e(){return f(this,e),m(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,a),d(e,[{key:"preload",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"preload",this).call(this),this.game.load.audio("background",["dist/audio/background.mp3","dist/audio/background.ogg"])}},{key:"create",value:function(){this.backgroundAudio||(this.backgroundAudio=this.game.add.audio("background",.5,!0)),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this,!1),this.text=this.game.add.text(this.game.world.centerX,this.game.world.centerY,"بوت",this.textStyle(20)),this.text.anchor.set(.5,.5),this.showState()}},{key:"update",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}}]),e}());e.exports=o},{"../class/scene":10,"../helper":12}],14:[function(t,e,i){var a=t("../class/scene"),o=(t("../helper"),function(t){function i(){return f(this,i),m(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return r(i,a),d(i,[{key:"preload",value:function(){s(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"preload",this).call(this),this.game.load.atlasJSONHash("tile","dist/image/tile.png","dist/json/tile.json")}},{key:"create",value:function(){s(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"create",this).call(this,!0),this.frameGroup=this.game.add.group(),this.levelFrame={},this.levelImage={},this.levelLock={};var t=25*this.game.screenScale;this.game.isMobile&&(t=10*this.game.screenScale,this.game.scale.isGameLandscape&&(t=7*this.game.screenScale)),this.frameGroup._width=this.stateBounds.width._size-2*t*this.game.screenScale,this.frameGroup._height=this.stateBounds.height._size-2*t*this.game.screenScale,this.frameGroup.x=this.stateBounds.width._one+t*this.game.screenScale,this.frameGroup.y=this.stateBounds.height._one+t*this.game.screenScale;for(var e=1;e<=9;e++)this.addLevelItem(e);this.showState(!1)}},{key:"addLevelItem",value:function(t){var e=!1;this.currentScale=.22*this.game.screenScale;this.game.isMobile&&(this.game.scale.isGameLandscape?this.currentScale=.16*this.game.screenScale:this.currentScale=.2*this.game.screenScale),t<=this.game.player.activeLevel&&(e=!0);var i=t%3==0?2:t%3-1,a=Math.ceil(t/3)-1,o={width:.3*this.frameGroup._width,height:.3*this.frameGroup._height,x:i*(.05*this.frameGroup._width)+i*(.3*this.frameGroup._width),y:a*(.05*this.frameGroup._height)+a*(.3*this.frameGroup._height)};if(this.levelFrame[t]=new Phaser.Rectangle(o.x,o.y,o.width,o.height),this.levelImage[t]=this.game.add.sprite(0,0,"tile","_"+t+"_00"),this.levelImage[t].anchor.setTo(.5,1),this.levelImage[t].scale.setTo(this.currentScale,this.currentScale),this.levelImage[t].alignIn(this.levelFrame[t],Phaser.BOTTOM_CENTER),this.levelImage[t].inputEnabled=!0,this.levelImage[t].input.pixelPerfectClick=!0,this.levelImage[t].input.pixelPerfectOver=!0,this.levelImage[t].input.useHandCursor=!0,this.frameGroup.add(this.levelImage[t]),e)this.levelImage[t].events.onInputDown.add(this.startState.bind(this,"Level_"+t),this),t==this.game.player.activeLevel?this.game.add.tween(this.levelImage[t].scale).to({x:this.currentScale+.025*this.currentScale,y:this.currentScale+.025*this.currentScale},200,"Linear",!0).loop(!0):this.levelImage[t].alpha=.7;else{this.levelImage[t].alpha=.7;var n="_05_1";t%2==0&&(n="_06_1"),this.levelLock[t]=this.game.add.image(0,0,"btn",n),this.levelLock[t].anchor.set(.5,.5),this.levelLock[t].scale.setTo(this.currentScale,this.currentScale),this.levelLock[t].alignIn(this.levelImage[t],Phaser.CENTER,10*this.currentScale,40*this.currentScale),this.frameGroup.add(this.levelLock[t]),this.levelImage[t].events.onInputDown.add(this.alertInactiveLevel,this)}}},{key:"alertInactiveLevel",value:function(){this.notify.load("شما مجوز ورود به این مرحله را ندارید!",!1)}}]),i}());e.exports=o},{"../class/scene":10,"../helper":12}],15:[function(t,e,i){var a=t("../../class/level"),o=(t("../../helper"),function(t){function e(){return f(this,e),m(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,a),d(e,[{key:"preload",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"preload",this).call(this)}},{key:"create",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this);this.initGameSpace(),this.addBaseTile("_0_11"),this.addBaseTile(),this.addBaseTile(),this.addMainTile("_1_00",function(){}),this.addBaseTile(),this.addBaseTile(),this.addBaseTile(),this.addMainTile("_2_00",function(){}),this.addPlayer(0),this.gameSpaceDraggable(),this.showState()}},{key:"update",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}}]),e}());e.exports=o},{"../../class/level":7,"../../helper":12}],16:[function(t,e,i){var a=t("../class/scene"),o=(t("../helper"),function(t){function e(){return f(this,e),m(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,a),d(e,[{key:"preload",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"preload",this).call(this)}},{key:"create",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this),this.text=this.game.add.text(this.game.world.centerX,this.game.world.centerY,"فروشگاه",this.textStyle(20)),this.text.anchor.set(.5,.5),this.showState()}}]),e}());e.exports=o},{"../class/scene":10,"../helper":12}]},{},[11]);